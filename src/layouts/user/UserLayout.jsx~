import React from 'react';
import { Box } from '@mui/material/Box';
import { Paper, Icon, IconButton, InputBase, Typography } from "@mui/material";
import MenuIcon from '@mui/icons-material/Menu';
import MailIcon from '@mui/icons-material/Mail';
import NotificationsIcon from '@mui/icons-material/Notifications';
import Badge from '@mui/material/Badge';
import AccountCircle from '@mui/icons-material/AccountCircle';
import AddIcon from '@mui/icons-material/Add';
import SearchIcon from '@mui/icons-material/Search';
import MicIcon from '@mui/icons-material/Mic';
import KeyboardIcon from '@mui/icons-material/Keyboard';
import { styled } from '@mui/material/styles';

// Sử dụng styled components để dễ dàng tùy chỉnh
const HeaderContainer = styled(Box)(({ theme }) => ({
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
    height: 60,
    backgroundColor: '#d6bfff',
    borderRadius: theme.shape.borderRadius,
    paddingX: theme.spacing(2),
    width: '100%', // Đảm bảo header chiếm toàn bộ chiều rộng
    flexShrink: 0, // Ngăn header co lại
}));

const LogoContainer = styled(Box)({
    display: 'flex',
    alignItems: 'center',
    flexShrink: 0, // Logo không bị co lại
});

const SearchWrapper = styled(Box)(({ theme }) => ({
    display: 'flex',
    alignItems: 'center',
    flexGrow: 1, // Search chiếm không gian còn lại
    margin: `0 ${theme.spacing(2)}`, // Khoảng cách giữa các phần tử
    minWidth: 0, // Quan trọng để các phần tử con có thể co dãn
}));

const StyledPaper = styled(Paper)(({ theme }) => ({
    display: 'flex',
    alignItems: 'center',
    width: '100%',  // Chiếm toàn bộ chiều rộng có sẵn
    maxWidth: 600, // Giới hạn chiều rộng tối đa
    height: 40,
    borderRadius: '50px',
    boxShadow: '0 0 4px rgba(0,0,0,0.1)',
    flexShrink: 1, // Cho phép search co lại khi cần
    minWidth: 0,  // Cần thiết để InputBase có thể co lại
}));

const StyledInputBase = styled(InputBase)({
    marginLeft: (theme) => theme.spacing(3),
    flex: 1,
    fontSize: 15,
    minWidth: 0, // Quan trọng để input có thể co lại
});

const StyledIconButton = styled(IconButton)(({ theme }) => ({
    padding: theme.spacing(1),
    height: 40,
}));

const SearchButton = styled(IconButton)(({ theme }) => ({
    padding: theme.spacing(1),
    height: 40,
    width: 70,
    borderRadius: theme.shape.borderRadius,
    backgroundColor: "rgba(207,207,207,0.29)",
    borderTopLeftRadius: 0,
    borderTopRightRadius: 20,
    borderBottomLeftRadius: 0,
    borderBottomRightRadius: 20,
    "&:hover": {
        backgroundColor: "rgba(189,189,189,0.49)",
    },
}));

const CreateButton = styled(IconButton)(({theme})=>({
    borderRadius:5,
    backgroundColor: 'rgba(255,255,255,0.29)',
    paddingX: theme.spacing(1.8),
    height:36
}));

const UserActions = styled(Box)({
    display: 'flex',
    alignItems: 'center',
    flexShrink: 0, // Các nút user không bị co lại
});

function ShowUserLayout() {
    return (
        <Box sx={{ flexGrow: 1, display: 'flex', flexDirection: 'column' }}>
            <HeaderContainer>
                <LogoContainer>
                    <Icon
                        size="large"
                        edge="start"
                        color="inherit"
                        aria-label="open drawer"
                        sx={{ mr: 2 }}
                    >
                        <MenuIcon />
                    </Icon>
                    <Typography
                        variant="h6"
                        noWrap
                        component="div"
                        sx={{ display: { xs: 'none', sm: 'block' } }}
                    >
                        GOYI
                    </Typography>
                </LogoContainer>

                <SearchWrapper>
                    <StyledPaper component="form">
                        <StyledInputBase
                            placeholder="Tìm kiếm"
                            inputProps={{ 'aria-label': 'tìm kiếm' }}
                        />
                        <StyledIconButton aria-label="keyboard">
                            <KeyboardIcon />
                        </StyledIconButton>
                        <SearchButton aria-label="search">
                            <SearchIcon />
                        </SearchButton>
                    </StyledPaper>
                    <StyledIconButton  aria-label="microphone">
                        <MicIcon />
                    </StyledIconButton>
                </SearchWrapper>

                <UserActions>
                    <Box sx={{ mr: 2 }}>
                        <CreateButton>
                            <AddIcon sx={{color:'black'}} />
                            <Typography sx={{ ml: 1, fontSize: 13 ,color:'black'}}>Tạo</Typography>
                        </CreateButton>
                    </Box>
                    <Box sx={{mr:1}}>
                        <StyledIconButton size="large" aria-label="show 4 new mails" color="inherit">
                            <Badge badgeContent={4} color="error">
                                <MailIcon />
                            </Badge>
                        </StyledIconButton>
                    </Box>

                    <Box sx={{mr:2}}>
                        <StyledIconButton
                            size="large"
                            aria-label="show 17 new notifications"
                            color="inherit"
                        >
                            <Badge badgeContent={17} color="error">
                                <NotificationsIcon />
                            </Badge>
                        </StyledIconButton>
                    </Box>

                    <Box>
                        <StyledIconButton
                            size="large"
                            edge="end"
                            aria-label="account of current user"
                            aria-haspopup="true"
                            color="inherit"
                        >
                            <AccountCircle sx={{height:30, width:30}} />
                        </StyledIconButton>
                    </Box>
                </UserActions>
            </HeaderContainer>
            {/* Nội dung chính của bạn ở đây */}
            <Box sx={{ flexGrow: 1, p: 3 }}>
                {/* PlaceHolder cho nội dung */}
                <Typography variant="body1">
                    Nội dung trang của bạn sẽ hiển thị ở đây.  Sử dụng Box có `flexGrow: 1` để nội dung này có thể mở rộng.
                </Typography>
            </Box>
        </Box>
    );
}

export default ShowUserLayout;
